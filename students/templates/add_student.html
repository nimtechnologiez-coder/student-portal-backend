{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add Student | Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  background: linear-gradient(135deg, #e0f7fa, #ffffff);
  min-height: 100vh;
  font-family: "Poppins", sans-serif;
}

.container {
  width: 90%;
  max-width: 650px;
  margin: 60px auto;
  background: #fff;
  border-radius: 16px;
  padding: 35px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  border: 1px solid rgba(0,150,136,0.2);
}

h2 {
  text-align: center;
  color: #00796b;
  margin-bottom: 25px;
  font-weight: 700;
}

.row-box {
  display: flex;
  gap: 18px;
  width: 100%;
}

.col-box {
  flex: 1;
}

label {
  display: block;
  margin-top: 12px;
  font-weight: 500;
  color: #004d40;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid #b2dfdb;
  background: #f9fffe;
}

input:focus, select:focus {
  border-color: #009688;
  box-shadow: 0 0 5px rgba(0,150,136,0.3);
}

.btn-row {
  display: flex;
  gap: 15px;
  margin-top: 30px;
}

button {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.btn-save {
  background: linear-gradient(90deg, #009688, #26a69a);
  color: #fff;
}
.btn-save:hover { opacity: 0.9; }

.btn-cancel {
  background: #eceff1;
  color: #333;
}
.btn-cancel:hover { background: #cfd8dc; }
</style>
</head>

<body>

{% include 'navbar.html' %}

<div class="container">
  <h2>➕ Add New Student</h2>

  <form method="POST" action="{% url 'add_student' %}" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- ROW 1 -->
    <div class="row-box">
      <div class="col-box">
        <label>Full Name</label>
        <input type="text" name="full_name" required>
      </div>

      <div class="col-box">
        <label>Email</label>
        <input type="email" name="email" required>
      </div>
    </div>

    <!-- PROFILE PHOTO -->
    <div class="row-box">
      <div class="col-box">
        <label>Profile Photo</label>
        <input type="file" name="profile_photo" accept="image/*">
      </div>
    </div>

    <!-- ROW 2 -->
    <div class="row-box">
      <div class="col-box">
        <label>Phone</label>
        <input type="text" name="phone" required>
      </div>

      <div class="col-box">
        <label>Course</label>
        <select name="course_name" required>
          <option value="">-- Select Course --</option>
          {% for c in courses %}
            <option value="{{ c.course_name }}">{{ c.course_name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <!-- ROW 3 -->
    <div class="row-box">
      <div class="col-box">
        <label>Batch</label>
        <input type="text" name="batch_name" required>
      </div>

      <div class="col-box">
        <label>Joining Date</label>
        <input type="date" name="joining_date" required>
      </div>
    </div>

    <!-- ROW 4 -->
    <div class="row-box">
      <div class="col-box">
        <label>Course Duration</label>
        <input type="text" name="duration" required>
      </div>
    </div>

    <!-- ✅ AMOUNT FIELD (DB SAVES CORRECTLY) -->
    <div class="row-box">
      <div class="col-box">
        <label>Amount (₹)</label>
        <input
          type="number"
          name="amount"
          placeholder="Enter course amount"
          min="0"
          step="0.01"
          required
        >
      </div>
    </div>

    <!-- ROW 5 -->
    <div class="row-box">
      <div class="col-box">
        <label>Student Type</label>
        <select name="student_type" id="student_type" required>
          <option value="">-- Select Type --</option>
          <option value="full">Full Time (All Access)</option>
          <option value="part">Part Time (Video Only)</option>
        </select>
      </div>
    </div>

    <!-- VALIDITY -->
    <div class="row-box">
      <div class="col-box">
        <label>Validity (Auto 10 Months)</label>
        <input type="text" value="10 Months" readonly>
      </div>
    </div>

    <!-- ACCESS TYPE -->
    <div class="row-box">
      <div class="col-box">
        <label>Access Type</label>
        <input type="text" id="access_type" name="access_type" readonly>
      </div>
    </div>

    <!-- BUTTONS -->
    <div class="btn-row">
      <button type="submit" class="btn-save">Add Student</button>
      <button type="button" class="btn-cancel" onclick="window.location.href='/student_list/'">
        Cancel
      </button>
    </div>

  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.getElementById("student_type").addEventListener("change", function () {
  this.value === "full"
    ? document.getElementById("access_type").value = "All Access"
    : document.getElementById("access_type").value = "Video Only Access";
});
</script>

</body>
</html>
